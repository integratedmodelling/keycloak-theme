import{jsx as t,jsxs as n,Fragment as x}from"react/jsx-runtime";import*as m from"react";import{useState as D}from"react";import{_ as T,f as I,B as U,n as $,A as M,c as P,u as G,a as O,G as S,b as k,S as R,C as j,d as Z,e as v,D as B}from"./index-cF5ei3Lq.js";import{P as V,c as _,e as q}from"./Page-52sjw9jm.js";import{f as F}from"./formatDate-D6sCZZr5.js";import{s as p,D as H,a as y,b as A}from"./DataListItemRow-AvrjezSL.js";import{E as K}from"./external-link-alt-icon-CcjNHYH6.js";import{D as N,a as d}from"./DataListItemCells-B-ReM56M.js";import{D as z,a as J,b as r,c as l,d as a}from"./DescriptionListTerm-hANM0_PC.js";import"react-dom";import"./grip-vertical-icon-BbFWIu7M.js";const b=s=>{var{className:h="",isExpanded:g=!1,"aria-controls":f="","aria-label":c="Details",rowid:C="",id:o,buttonProps:u}=s,L=T(s,["className","isExpanded","aria-controls","aria-label","rowid","id","buttonProps"]);return m.createElement("div",Object.assign({className:I(p.dataListItemControl,h)},L),m.createElement("div",{className:I(p.dataListToggle)},m.createElement(U,Object.assign({id:o,variant:$.plain,"aria-controls":f!==""&&f,"aria-label":c,"aria-labelledby":c!=="Details"?null:`${C} ${o}`,"aria-expanded":g},u),m.createElement("div",{className:I(p.dataListToggleIcon)},m.createElement(M,null)))))};b.displayName="DataListToggle";const Q={name:"InfoAltIcon",height:1024,width:1024,svgPath:"M592,369 L592,289 C592.013862,284.755109 590.320137,280.682962 587.3,277.7 C584.338831,274.647672 580.252355,272.947987 576,273 L464,273 C459.755109,272.986138 455.682962,274.679863 452.7,277.7 C449.647672,280.661169 447.947987,284.747645 447.99884,289 L447.99884,369 C447.986138,373.244891 449.679863,377.317038 452.7,380.3 C455.661169,383.352328 459.747645,385.052013 464,385 L576,385 C580.244891,385.013862 584.317038,383.320137 587.3,380.3 C590.359349,377.343612 592.060354,373.253963 592,369 Z M592,705 L592,465 C592,456.163444 584.836556,449 576,449 L432,449 C423.163444,449 416,456.163444 416,465 L416,497 C416,505.836556 423.163444,513 432,513 L448,513 L448,705 L416,705 C407.163444,705 400,712.163444 400,721 L400,753 C400,761.836556 407.163444,769 416,769 L624,769 C632.836556,769 640,761.836556 640,753 L640,721 C640,712.163444 632.836556,705 624,705 L592,705 Z M512,896 C300.2,896 128,723.9 128,512 C128,300.3 300.2,128 512,128 C723.8,128 896,300.2 896,512 C896,723.8 723.7,896 512,896 Z M512.1,0 C229.7,0 0,229.8 0,512 C0,794.2 229.8,1024 512.1,1024 C794.4,1024 1024,794.3 1024,512 C1024,229.7 794.4,0 512.1,0 Z",yOffset:0,xOffset:0},W=P(Q),de=()=>{const{t:s}=G(),h=O(),{addAlert:g,addError:f}=S(),[c,C]=D(),[o,u]=D(1),L=()=>u(o+1);k(e=>_({signal:e,context:h}),e=>C(e.map(i=>({...i,open:!1}))),[o]);const w=e=>{C([...c.map(i=>i.clientId===e?{...i,open:!i.open}:i)])},E=async e=>{try{await q(h,e),L(),g(s("removeConsentSuccess"))}catch(i){f(s("removeConsentError",{error:i}).toString())}};return c?t(V,{title:s("application"),description:s("applicationsIntroMessage"),children:n(H,{id:"applications-list","aria-label":s("application"),children:[t(y,{id:"applications-list-header","aria-labelledby":"Columns names",children:n(A,{children:[t("span",{style:{visibility:"hidden",height:55},children:t(b,{id:"applications-list-header-invisible-toggle","aria-controls":"applications-list-content"})}),t(N,{dataListCells:[t(d,{width:2,className:"pf-u-pt-md",children:t("strong",{children:s("name")})},"applications-list-client-id-header"),t(d,{width:2,className:"pf-u-pt-md",children:t("strong",{children:s("applicationType")})},"applications-list-app-type-header"),t(d,{width:2,className:"pf-u-pt-md",children:t("strong",{children:s("status")})},"applications-list-status")]})]})}),c.map(e=>n(y,{"aria-labelledby":"applications-list","data-testid":"applications-list-item",isExpanded:e.open,children:[n(A,{className:"pf-u-align-items-center",children:[t(b,{onClick:()=>w(e.clientId),isExpanded:e.open,id:`toggle-${e.clientId}`,"aria-controls":`content-${e.clientId}`}),t(N,{className:"pf-u-align-items-center",dataListCells:[n(d,{width:2,children:[e.effectiveUrl&&n(U,{className:"pf-u-pl-0 title-case",component:"a",variant:"link",onClick:()=>window.open(e.effectiveUrl),children:[e.clientName||e.clientId," ",t(K,{})]}),!e.effectiveUrl&&t("span",{children:e.clientName||e.clientId})]},`client${e.clientId}`),n(d,{width:2,children:[e.userConsentRequired?s("thirdPartyApp"):s("internalApp"),e.offlineAccess?", "+s("offlineAccess"):""]},`internal${e.clientId}`),t(d,{width:2,children:e.inUse?s("inUse"):s("notInUse")},`status${e.clientId}`)]})]}),n(z,{id:`content-${e.clientId}`,className:"pf-u-pl-4xl","aria-label":s("applicationDetails",{clientId:e.clientId}),isHidden:!e.open,children:[n(J,{children:[n(r,{children:[t(l,{children:s("client")}),t(a,{children:e.clientId})]}),e.description&&n(r,{children:[t(l,{children:s("description")}),t(a,{children:e.description})]}),e.effectiveUrl&&n(r,{children:[t(l,{children:"URL"}),t(a,{children:e.effectiveUrl.split('"')})]}),e.consent&&n(x,{children:[n(r,{children:[t(l,{children:s("hasAccessTo")}),e.consent.grantedScopes.map(i=>n(a,{children:[t(j,{})," ",s(i.name)]},`scope${i.id}`))]}),e.tosUri&&n(r,{children:[t(l,{children:s("termsOfService")}),t(a,{children:e.tosUri})]}),e.policyUri&&n(r,{children:[t(l,{children:s("privacyPolicy")}),t(a,{children:e.policyUri})]}),e.logoUri&&n(r,{children:[t(l,{children:s("logo")}),t(a,{children:t("img",{src:e.logoUri})})]}),n(r,{children:[t(l,{children:s("accessGrantedOn")}),t(a,{children:F(new Date(e.consent.createdDate))})]})]})]}),(e.consent||e.offlineAccess)&&n(Z,{hasGutter:!0,children:[t("hr",{}),t(v,{children:t(B,{buttonTitle:s("removeAccess"),modalTitle:s("removeAccess"),continueLabel:s("confirm"),cancelLabel:s("cancel"),buttonVariant:"secondary",onContinue:()=>E(e.clientId),children:s("removeModalMessage",{name:e.clientId})})}),n(v,{children:[t(W,{})," ",s("infoMessage")]})]})]})]},e.clientId))]})}):t(R,{})};export{de as Applications,de as default};
//# sourceMappingURL=Applications-CL6DXE7x.js.map
